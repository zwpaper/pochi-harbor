Hit:1 http://deb.debian.org/debian bookworm InRelease
Hit:2 http://deb.debian.org/debian bookworm-updates InRelease
Hit:3 http://deb.debian.org/debian-security bookworm-security InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version (7.88.1-10+deb12u14).
0 upgraded, 0 newly installed, 0 to remove and 35 not upgraded.
downloading uv 0.9.5 x86_64-unknown-linux-gnu
no checksums to verify
installing to /root/.local/bin
  uv
  uvx
everything's installed!

To add $HOME/.local/bin to your PATH, either restart your shell or run:

    source $HOME/.local/bin/env (sh, bash, zsh)
    source $HOME/.local/bin/env.fish (fish)
Downloading pygments (1.2MiB)
Downloading setuptools (1.2MiB)
Downloading numpy (15.9MiB)
 Downloading pygments
 Downloading setuptools
 Downloading numpy
Installed 8 packages in 56ms
============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.1, pluggy-1.6.0
rootdir: /tests
plugins: json-ctrf-0.3.5
collected 6 items

../tests/test_outputs.py F.FFFF                                          [100%]

=================================== FAILURES ===================================
___________________________ test_c_extension_exists ____________________________

    def test_c_extension_exists():
        """Verify that a compiled C extension actually exists"""
        try:
            # Try to import the C extension module
            sys.path.append("/app")
>           import portfolio_optimized_c
E           ModuleNotFoundError: No module named 'portfolio_optimized_c'

/tests/test_outputs.py:39: ModuleNotFoundError

During handling of the above exception, another exception occurred:

    def test_c_extension_exists():
        """Verify that a compiled C extension actually exists"""
        try:
            # Try to import the C extension module
            sys.path.append("/app")
            import portfolio_optimized_c
    
            # Check that it's actually a compiled extension, not pure Python
            module_file = portfolio_optimized_c.__file__
            assert module_file is not None, "C extension module has no file attribute"
    
            # Compiled extensions typically end with .so, .pyd, or similar
            assert not module_file.endswith(".py"), (
                f"Expected compiled C extension, but got Python file: {module_file}"
            )
            assert any(module_file.endswith(ext) for ext in [".so", ".pyd", ".dll"]), (
                f"Module doesn't appear to be a compiled extension: {module_file}"
            )
    
            # Verify the required functions exist
            assert hasattr(portfolio_optimized_c, "portfolio_risk_c"), (
                "Missing portfolio_risk_c function"
            )
            assert hasattr(portfolio_optimized_c, "portfolio_return_c"), (
                "Missing portfolio_return_c function"
            )
    
        except ImportError as e:
>           pytest.fail(
                f"C extension module not found. Did you run "
                f"'python setup.py build_ext --inplace'? Error: {e}"
            )
E           Failed: C extension module not found. Did you run 'python setup.py build_ext --inplace'? Error: No module named 'portfolio_optimized_c'

/tests/test_outputs.py:62: Failed
____________________________ test_correctness_small ____________________________

    def test_correctness_small():
        """Test correctness on small portfolio"""
        # Import from wrapper, which should use the C extension
        sys.path.append("/app")
        from portfolio_optimized import portfolio_return_c, portfolio_risk_c
    
        weights, cov, returns = generate_test_data(100)
    
        # Use protected baseline for comparison
        risk_python = portfolio_risk_python(weights, cov)
        return_python = portfolio_return_python(weights, returns)
    
>       risk_c = portfolio_risk_c(weights, cov)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/tests/test_outputs.py:93: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

weights = [0.015277561349280046, 0.013323702074352189, 0.012538212986872976, 0.00997055318802558, 0.018197603223003123, 0.014124438625086912, ...]
cov_matrix = [[0.03557707193831535, 2.5010755222666935e-05, 0.00027502931836911925, 0.00022321073814882274, 0.0007364712141640124, ...02668251899525428, 0.0008486957344143055, 0.0008831063933001429, 0.0002869137168689272, 0.01882154777295276, ...], ...]

    def portfolio_risk_c(weights, cov_matrix):
        """
        Calculate portfolio risk using C extension: sqrt(x^T * S * x)
    
        Args:
            weights: Portfolio weights (1D array)
            cov_matrix: Covariance matrix (2D array)
        Returns:
            Portfolio risk (scalar)
        """
        # TODO: Convert inputs to NumPy arrays and call C extension
    
>       raise NotImplementedError("TODO: Implement portfolio_risk_c wrapper")
E       NotImplementedError: TODO: Implement portfolio_risk_c wrapper

portfolio_optimized.py:18: NotImplementedError
____________________ test_performance_and_scalability[5000] ____________________

n = 5000

    @pytest.mark.parametrize("n", [5000, 6000, 8000])
    def test_performance_and_scalability(n):
        """Test performance and scalability requirements for large portfolios"""
        sys.path.append("/app")
        from portfolio_optimized import portfolio_return_c, portfolio_risk_c
    
        weights, cov, returns = generate_test_data(n)
    
        # Test correctness first using protected baseline
        risk_python = portfolio_risk_python(weights, cov)
        return_python = portfolio_return_python(weights, returns)
    
>       risk_c = portfolio_risk_c(weights, cov)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/tests/test_outputs.py:117: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

weights = [0.0002292421199356029, 5.5912734638220654e-05, 0.00011029580015186195, 0.00017848152258596035, 5.84352348128312e-05, 0.00028381446378489413, ...]
cov_matrix = [[0.03557707193831535, 2.5010755222666935e-05, 0.00027502931836911925, 0.00022321073814882274, 0.0007364712141640124, ...925044537185159, 0.0007030908304080625, 0.00021590685329960104, 0.0006562376226325828, 0.017988849967136254, ...], ...]

    def portfolio_risk_c(weights, cov_matrix):
        """
        Calculate portfolio risk using C extension: sqrt(x^T * S * x)
    
        Args:
            weights: Portfolio weights (1D array)
            cov_matrix: Covariance matrix (2D array)
        Returns:
            Portfolio risk (scalar)
        """
        # TODO: Convert inputs to NumPy arrays and call C extension
    
>       raise NotImplementedError("TODO: Implement portfolio_risk_c wrapper")
E       NotImplementedError: TODO: Implement portfolio_risk_c wrapper

portfolio_optimized.py:18: NotImplementedError
____________________ test_performance_and_scalability[6000] ____________________

n = 6000

    @pytest.mark.parametrize("n", [5000, 6000, 8000])
    def test_performance_and_scalability(n):
        """Test performance and scalability requirements for large portfolios"""
        sys.path.append("/app")
        from portfolio_optimized import portfolio_return_c, portfolio_risk_c
    
        weights, cov, returns = generate_test_data(n)
    
        # Test correctness first using protected baseline
        risk_python = portfolio_risk_python(weights, cov)
        return_python = portfolio_return_python(weights, returns)
    
>       risk_c = portfolio_risk_c(weights, cov)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/tests/test_outputs.py:117: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

weights = [0.00012114077748211159, 0.0001377872480244406, 1.3143678493607865e-05, 0.00029110255933746676, 4.9465982721025325e-05, 0.00026132113049301306, ...]
cov_matrix = [[0.03557707193831535, 2.5010755222666935e-05, 0.00027502931836911925, 0.00022321073814882274, 0.0007364712141640124, ...05296123298924157, 0.000393745099889405, 0.000988576583188331, 0.00042171012712796977, 0.025629844647096063, ...], ...]

    def portfolio_risk_c(weights, cov_matrix):
        """
        Calculate portfolio risk using C extension: sqrt(x^T * S * x)
    
        Args:
            weights: Portfolio weights (1D array)
            cov_matrix: Covariance matrix (2D array)
        Returns:
            Portfolio risk (scalar)
        """
        # TODO: Convert inputs to NumPy arrays and call C extension
    
>       raise NotImplementedError("TODO: Implement portfolio_risk_c wrapper")
E       NotImplementedError: TODO: Implement portfolio_risk_c wrapper

portfolio_optimized.py:18: NotImplementedError
____________________ test_performance_and_scalability[8000] ____________________

n = 8000

    @pytest.mark.parametrize("n", [5000, 6000, 8000])
    def test_performance_and_scalability(n):
        """Test performance and scalability requirements for large portfolios"""
        sys.path.append("/app")
        from portfolio_optimized import portfolio_return_c, portfolio_risk_c
    
        weights, cov, returns = generate_test_data(n)
    
        # Test correctness first using protected baseline
        risk_python = portfolio_risk_python(weights, cov)
        return_python = portfolio_return_python(weights, returns)
    
>       risk_c = portfolio_risk_c(weights, cov)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

/tests/test_outputs.py:117: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

weights = [0.000162310297817993, 0.00021342622519395993, 3.385883356696483e-05, 7.929689458488875e-05, 5.147768911288513e-05, 0.00023678965936467156, ...]
cov_matrix = [[0.03557707193831535, 2.5010755222666935e-05, 0.00027502931836911925, 0.00022321073814882274, 0.0007364712141640124, ...6244214557796377, 0.0007844576922962113, 3.8451549981415534e-05, 0.0007239180650823003, 0.02677012885932841, ...], ...]

    def portfolio_risk_c(weights, cov_matrix):
        """
        Calculate portfolio risk using C extension: sqrt(x^T * S * x)
    
        Args:
            weights: Portfolio weights (1D array)
            cov_matrix: Covariance matrix (2D array)
        Returns:
            Portfolio risk (scalar)
        """
        # TODO: Convert inputs to NumPy arrays and call C extension
    
>       raise NotImplementedError("TODO: Implement portfolio_risk_c wrapper")
E       NotImplementedError: TODO: Implement portfolio_risk_c wrapper

portfolio_optimized.py:18: NotImplementedError
==================================== PASSES ====================================
=========================== short test summary info ============================
PASSED ../tests/test_outputs.py::test_baseline_functionality
FAILED ../tests/test_outputs.py::test_c_extension_exists - Failed: C extensio...
FAILED ../tests/test_outputs.py::test_correctness_small - NotImplementedError...
FAILED ../tests/test_outputs.py::test_performance_and_scalability[5000] - Not...
FAILED ../tests/test_outputs.py::test_performance_and_scalability[6000] - Not...
FAILED ../tests/test_outputs.py::test_performance_and_scalability[8000] - Not...
========================= 5 failed, 1 passed in 25.28s =========================
