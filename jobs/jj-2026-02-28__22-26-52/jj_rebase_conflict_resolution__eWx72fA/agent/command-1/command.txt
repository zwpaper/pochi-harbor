trap 'rm -rf /tmp/codex-secrets "$CODEX_HOME/auth.json"' EXIT TERM INT; codex exec --dangerously-bypass-approvals-and-sandbox --skip-git-repo-check --model gpt-5.3-codex --json --enable unified_exec -c model_reasoning_effort=high -- 'You are working in a `jj` repository located at `/home/user/repo`. You have been developing a feature tracked by the `feature` bookmark. Meanwhile, the `main` bookmark has been updated with new configuration settings. Both branches have modified `src/config.toml`, which will cause a conflict when you verify your work against the latest `main`.

Your task is to:
1. Navigate to `/home/user/repo`.
2. Rebase the `feature` bookmark onto the `main` bookmark.
3. Identify the conflict in `src/config.toml`.
4. Resolve the conflict by keeping **both** configuration values:
   - `timeout = 30` (introduced in `main`)
   - `max_retries = 5` (introduced in `feature`)
   The final file content should look like:
   ```toml
   [server]
   timeout = 30
   max_retries = 5
   ```
5. Ensure the resolution is recorded in the `feature` revision. The `feature` bookmark should point to a single commit that is a direct child of `main`, with no remaining conflicts.
6. Generate a verification log by running `jj log -r ::feature` and saving the output to `/home/user/rebase_verification.txt`.
' 2>&1 </dev/null | tee /logs/agent/codex.txt