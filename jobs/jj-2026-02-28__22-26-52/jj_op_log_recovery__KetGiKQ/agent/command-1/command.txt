trap 'rm -rf /tmp/codex-secrets "$CODEX_HOME/auth.json"' EXIT TERM INT; codex exec --dangerously-bypass-approvals-and-sandbox --skip-git-repo-check --model gpt-5.3-codex --json --enable unified_exec -c model_reasoning_effort=high -- 'You are a DevOps engineer assisting a developer who accidentally lost their work in a Jujutsu (`jj`) repository.

The repository is located at `/home/user/repo`.

**The Incident:**
The developer was implementing a `multiply` function in `src/math_utils.py`. They had a working revision with the description "feat: implement multiply" containing the code. However, they accidentally ran a command that abandoned this revision, reverting the file to its previous state (which only contained an `add` function).

**Your Mission:**
1.  Navigate to `/home/user/repo`.
2.  Use `jj op log` to investigate the recent history and identify the operation that caused the loss (where the revision was abandoned).
3.  Recover the lost revision. You can do this by undoing the operation (`jj undo`) or by finding the hidden revision ID and checking it out/restoring it.
4.  Ensure the working copy is currently pointing to the recovered revision (the one containing the `multiply` function).
5.  Create a bookmark named `recovered-feat` pointing to this revision.
6.  Identify the **Operation ID** of the command that caused the data loss (the accidental abandon). Write this Operation ID (the short hash is sufficient) to a file named `/home/user/culprit_op_id.txt`.

**Verification Criteria:**
*   The file `src/math_utils.py` must contain the `multiply` function.
*   The working copy revision must have the description "feat: implement multiply".
*   A bookmark named `recovered-feat` must point to the current working copy revision.
*   The file `/home/user/culprit_op_id.txt` must contain the valid operation ID of the destructive action.
' 2>&1 </dev/null | tee /logs/agent/codex.txt